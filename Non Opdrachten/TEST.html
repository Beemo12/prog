<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Side-Scroller Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-color: #eee;
        }

        #player {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: blue;
            transition: left 0.3s ease-out;
        }

        .obstacle {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: red;
        }

        .power-up {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: yellow;
        }

        #score {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
        }

        #level {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 24px;
        }
    </style>
</head>
<body>

<div id="game-container">
    <div id="player"></div>
</div>
<div id="score">Score: 0</div>
<div id="level">Level: 1</div>

<script>
    const gameContainer = document.getElementById('game-container');
    const player = document.getElementById('player');
    const scoreElement = document.getElementById('score');
    const levelElement = document.getElementById('level');

    let playerPosition = 50;
    let score = 0;
    let level = 1;
    let obstacleSpeed = 5;
    let powerUpInterval;

    document.addEventListener('keydown', (event) => {
        if (event.key === 'ArrowRight') {
            movePlayer(10);
        } else if (event.key === 'ArrowLeft') {
            movePlayer(-10);
        }
    });

    function movePlayer(amount) {
        playerPosition += amount;
        player.style.left = playerPosition + 'px';
    }

    function createObstacle() {
        const obstacle = document.createElement('div');
        obstacle.className = 'obstacle';
        obstacle.style.top = Math.floor(Math.random() * (gameContainer.clientHeight - 50)) + 'px';
        gameContainer.appendChild(obstacle);

        const moveInterval = setInterval(() => {
            const obstacleLeft = obstacle.offsetLeft;
            if (obstacleLeft > -50) {
                obstacle.style.left = obstacleLeft - obstacleSpeed + 'px';
            } else {
                clearInterval(moveInterval);
                gameContainer.removeChild(obstacle);
                updateScore(10);
            }

            // Check for collision
            if (
                playerPosition < obstacleLeft + 50 &&
                playerPosition + 50 > obstacleLeft &&
                player.offsetTop < obstacle.offsetTop + 50 &&
                player.offsetTop + 50 > obstacle.offsetTop
            ) {
                gameOver();
            }
        }, 20);
    }

    function createPowerUp() {
        const powerUp = document.createElement('div');
        powerUp.className = 'power-up';
        powerUp.style.top = Math.floor(Math.random() * (gameContainer.clientHeight - 50)) + 'px';
        gameContainer.appendChild(powerUp);

        const moveInterval = setInterval(() => {
            const powerUpLeft = powerUp.offsetLeft;
            if (powerUpLeft > -50) {
                powerUp.style.left = powerUpLeft - obstacleSpeed + 'px';
            } else {
                clearInterval(moveInterval);
                gameContainer.removeChild(powerUp);
            }

            // Check for collision with power-up
            if (
                playerPosition < powerUpLeft + 50 &&
                playerPosition + 50 > powerUpLeft &&
                player.offsetTop < powerUp.offsetTop + 50 &&
                player.offsetTop + 50 > powerUp.offsetTop
            ) {
                gameContainer.removeChild(powerUp);
                updateScore(50);
                clearInterval(powerUpInterval); // Stop creating power-ups temporarily
                setTimeout(() => {
                    powerUpInterval = setInterval(createPowerUp, 10000); // Resume creating power-ups after 10 seconds
                }, 10000);
            }
        }, 20);
    }

    function updateScore(points) {
        score += points;
        scoreElement.innerText = 'Score: ' + score;

        // Increase obstacle speed and level as score increases
        if (score % 100 === 0) {
            obstacleSpeed += 1;
            level += 1;
            levelElement.innerText = 'Level: ' + level;
        }
    }

    function gameOver() {
        alert('Game Over! Your Score: ' + score);
        resetGame();
    }

    function resetGame() {
        playerPosition = 50;
        player.style.left = playerPosition + 'px';
        score = 0;
        level = 1;
        obstacleSpeed = 5;
        scoreElement.innerText = 'Score: 0';
        levelElement.innerText = 'Level: 1';

        // Remove all obstacles and power-ups
        const obstacles = document.querySelectorAll('.obstacle');
        obstacles.forEach(obstacle => gameContainer.removeChild(obstacle));

        const powerUps = document.querySelectorAll('.power-up');
        powerUps.forEach(powerUp => gameContainer.removeChild(powerUp));

        // Reset power-up interval
        clearInterval(powerUpInterval);
        powerUpInterval = setInterval(createPowerUp, 10000);
    }

    setInterval(createObstacle, 2000); // Create a new obstacle every 2 seconds
    powerUpInterval = setInterval(createPowerUp, 10000); // Create a power-up every 10 seconds
</script>

</body>
</html>
